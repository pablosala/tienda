<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Admin Panel &mdash; Solid Surface</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Admin Panel" />
    <meta name="keywords" content="admin, dashboard, solid surface" />
    <meta name="author" content="Sala Sax" />
    
    <!-- Favicon -->
    <link rel="icon" href="{{ url_for('static', filename='images/logo.jpg') }}">

    <!-- Animate.css -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animate.css') }}">
    <!-- Icomoon Icon Fonts -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/icomoon.css') }}">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.css') }}">

    <!-- Flexslider -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flexslider.css') }}">

    <!-- Owl Carousel -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.carousel.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.theme.default.min.css') }}">

    <!-- Theme style -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <!-- Modernizr JS -->
    <script src="{{ url_for('static', filename='js/modernizr-2.6.2.min.js') }}"></script>
    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
    <script src="{{ url_for('static', filename='js/respond.min.js') }}"></script>
    <![endif]-->

    <!-- Custom CSS -->
    <style>
        /* Ajuste de ancho del sidebar */
        #sidebar {
            width: 200px;
            flex-shrink: 0;
        }

        /* Permitir que el contenido crezca y ajuste el padding */
        #page-content-wrapper {
            flex-grow: 1;
            padding: 20px;
            overflow-x: auto; /* Permitir desbordamiento horizontal */
        }

        /* Asegurar que el wrapper sea un contenedor flex */
        #wrapper {
            height: 100vh; /* Asegurar que tome toda la altura de la ventana */
            overflow-x: auto; /* Permitir desbordamiento horizontal */
        }

        /* Barra superior marrón claro */
        .top-bar {
            background-color: #D2B48C;
            color: white;
            padding: 10px 0;
            text-align: center;
        }

        .top-bar a {
            color: white;
            margin: 0 10px;
        }

        .navbar-nav > li {
            float: none;
            display: inline-block;
            position: relative;
        }

        .navbar-nav {
            text-align: center;
        }

        .navbar-nav .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            min-width: 160px;
            padding: 5px 0;
            margin: 2px 0 0;
            font-size: 14px;
            text-align: left;
            background-color: #D2B48C;
            border: 1px solid rgba(0, 0, 0, .15);
            border-radius: 4px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
            display: none;
        }

        .search .input-group {
            display: flex;
            align-items: center;
            margin-top: 10px;
            margin-right: 10px;
        }

        .search input[type="text"] {
            flex: 1;
            border-radius: 4px 0 0 4px;
            border-right: 0;
        }

        .search button {
            border-radius: 0 4px 4px 0;
            margin-left: -1px;
        }

        .top-bar ul {
            display: flex;
            justify-content: center;
        }

        .top-bar ul li {
            display: inline-block;
            margin: 0 15px;
        }

        /* Quitar cambio de color al pasar el cursor y al pulsarlo */
        .navbar-nav .dropdown-toggle:focus, 
        .navbar-nav .dropdown-toggle:hover {
            background-color: transparent !important;
            box-shadow: none !important;
            color: white !important;
        }

        /* Mantener la visibilidad del menú desplegable al hacer clic */
        .dropdown-menu.show {
            display: block;
        }

        /* Estilo para los elementos del menú */
        .fh5co-nav .menu-2 ul {
            display: flex;
            justify-content: center;
            margin: 0;
            padding: 0;
            list-style: none;
            margin-block-end:auto;
        }

        .fh5co-nav .menu-2 ul li {
            margin: 0 10px;
            display: inline-block;
        }

        #fh5co-logo img {
            max-width: 60%;
            height: auto;
            margin-top: -50px;
        }

        /* Estilos para dispositivos móviles */
        @media (max-width: 767px) {
            #fh5co-logo img {
                max-width: 200%;
                margin-top: -25px;
            }
        }






        /* Sidebar se muestra como una columna fija en pantallas grandes */
        #sidebar {
            width: 200px;
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            background: #f8f9fa;
            z-index: 1000;
            transition: left 0.3s ease;
            display: block;
        }

        /* Cuando se activa, el sidebar se muestra */
        #sidebar.active {
            left: 0;
        }

        /* Ajuste del contenido cuando el sidebar está activo */
        #page-content-wrapper {
            flex-grow: 1;
            padding: 20px;
            margin-left: 200px;
            transition: margin-left 0.3s ease;
        }

        /* Cuando el sidebar está oculto */
        #page-content-wrapper.sidebar-closed {
            margin-left: 0;
        }

        /* Botón de menú hamburguesa */
        #menu-toggle {
            position: fixed;
            top: 15px;
            left: 15px;
            font-size: 24px;
            cursor: pointer;
            z-index: 1100;
            display: none; /* Oculto por defecto */
        }

        /* Mostrar el botón de menú en dispositivos móviles */
        @media (max-width: 767px) {
            #menu-toggle {
                display: block;
            }

            #sidebar {
                width: 100%; /* Sidebar toma todo el ancho de la pantalla */
                left: -100%;
            }

            #sidebar.active {
                left: 0;
            }

            #page-content-wrapper {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>

<div id="page">
    <nav class="fh5co-nav" role="navigation">
        <div class="container">
            <div class="row">
                <div class="col-md-3 col-xs-2">
                    <div id="fh5co-logo">
                        <a href="{{ url_for('index') }}">
                            <img src="{{ url_for('static', filename='images/logo.jpg') }}" alt="Sala Sax Logo">
                        </a>
                    </div>
                </div>
                <div class="col-md-6 col-xs-6 text-center menu-1">
                    <ul>
                        {% if current_user.is_authenticated and current_user.role == 'admin' %}
                            <li><a href="{{ url_for('admin_dashboard') }}">Admin</a></li>
                        {% endif %}
                        <li class="has-dropdown">
                            <a href="{{ url_for('index') }}" id="tienda-link">Tienda</a>
                            <ul class="dropdown">
                                <li><a href="{{ url_for('customize_countertop') }}">Diseñar Encimera</a></li>
                                {% for categoria in categorias %}
                                    <li><a href="{{ url_for('categoria_productos', categoria_id=categoria.id) }}">{{ categoria.nombre }}</a></li>
                                {% endfor %}
                            </ul>
                        </li>
                        <li><a href="{{ url_for('services') }}">Servicios</a></li>
                        <li><a href="{{ url_for('galeria') }}">Galería</a></li>
                        <li><a href="{{ url_for('contact') }}">Contacto</a></li>
                        <li><a href="{{ url_for('about') }}">Acerca de</a></li>
                    </ul>
                </div>
                <div class="col-md-3 col-xs-4 text-right hidden-xs menu-2">
                    <ul class="menu-2">
                        <li class="shopping-cart"><a href="{{ url_for('carrito') }}" class="cart"><span><small>{{ carrito_items_count }}</small><i class="icon-shopping-cart"></i></span></a></li>
                        <li class="mi-cuenta"><a href="{{ url_for('detalles_cuenta') }}">Mi cuenta</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- Botón para abrir/cerrar el menú -->
    <div id="menu-toggle">&#9776;</div>

        <div id="wrapper">
            <!-- Sidebar -->
            <nav id="sidebar" class="bg-light border-right sidebar">
                <div class="sidebar-header">
                    <h3>Administrador</h3>
                </div>
                <ul class="list-unstyled components">
                    <li>
                        <a href="{{ url_for('admin_dashboard') }}" class="list-group-item list-group-item-action">Dashboard</a>
                    </li>
                    <li>
                        <a href="{{ url_for('admin_products') }}" class="list-group-item list-group-item-action">Productos</a>
                    </li>
                    <li>
                        <a href="{{ url_for('admin_orders') }}" class="list-group-item list-group-item-action">Pedidos</a>
                    </li>
                    <li>
                        <a href="{{ url_for('admin_materiales') }}" class="list-group-item list-group-item-action">Materiales</a>
                    </li>
                    <li>
                        <a href="{{ url_for('admin_tipos_fregadero') }}" class="list-group-item list-group-item-action">Fregadero</a>
                    </li>
                    <li>
                        <a href="{{ url_for('admin_tipos_lavabo') }}" class="list-group-item list-group-item-action">Lavabo</a>
                    </li>
                    <li>
                        <a href="{{ url_for('admin_campos_configuracion') }}" class="list-group-item list-group-item-action">Campos Extra</a>
                    </li>
                    <li>
                        <a href="{{ url_for('admin_categorias') }}" class="list-group-item list-group-item-action">Categorias</a>
                    </li>
                    <li>
                        <a href="{{ url_for('admin_usuarios') }}" class="list-group-item list-group-item-action">Usuarios</a>
                    </li>
                    <li>
                        <a href="{{ url_for('presuapp') }}" class="list-group-item list-group-item-action">Presuapp</a>
                    </li>
                    <li>
                        <a href="{{ url_for('logout') }}" class="list-group-item list-group-item-action">Cerrar Sesión</a>
                    </li>
                </ul>
            </nav>
            <!-- /#sidebar-wrapper -->

        <!-- Contenido de la página -->
        <div id="page-content-wrapper sidebar-closed">
            <div class="container mt-5">
                <div class="message-flash">
                    {% with messages = get_flashed_messages(with_categories=true) %}
                        {% if messages %}
                            {% set category, message = messages[-1] %}  <!-- Obtener el último mensaje -->
                            <p class="flash-message-text {{ category }}">{{ message }}</p>
                        {% endif %}
                    {% endwith %}
                </div>
                {% block content %}
                {% endblock %}
            </div>
        </div>
        <!-- /#page-content-wrapper -->
    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
    <!-- jQuery Easing -->
    <script src="{{ url_for('static', filename='js/jquery.easing.1.3.js') }}"></script>
    <!-- Bootstrap -->
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <!-- Waypoints -->
    <script src="{{ url_for('static', filename='js/jquery.waypoints.min.js') }}"></script>
    <!-- Carousel -->
    <script src="{{ url_for('static', filename='js/owl.carousel.min.js') }}"></script>
    <!-- countTo -->
    <script src="{{ url_for('static', filename='js/jquery.countTo.js') }}"></script>
    <!-- Flexslider -->
    <script src="{{ url_for('static', filename='js/jquery.flexslider-min.js') }}"></script>
    <!-- Main -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

    <script>
        $(document).ready(function () {
            // Función para abrir/cerrar el menú lateral
            $('#menu-toggle').on('click', function () {
                $('#sidebar').toggleClass('active');
                $('#page-content-wrapper').toggleClass('sidebar-closed');
            });
        });
    </script>

    <script>
    $(document).ready(function(){
        // Función para mostrar y ocultar el menú desplegable al hacer clic
        $('.dropdown-toggle').click(function(e) {
            e.preventDefault();
            var $parentLi = $(this).parent();
            $parentLi.toggleClass('open');
            $('.dropdown-menu', $parentLi).toggleClass('show');
        });

        // Función para ocultar el menú desplegable al hacer clic fuera de él
        $(document).click(function(event) {
            if (!$(event.target).closest('.dropdown').length) {
                $('.dropdown').removeClass('open');
                $('.dropdown-menu').removeClass('show');
            }
        });

        // Evitar que el menú se cierre al hacer clic dentro del menú desplegable
        $('.dropdown-menu').click(function(e) {
            e.stopPropagation();
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
        var tiendaLink = document.getElementById('tienda-link');
        var dropdown = tiendaLink.nextElementSibling;

        tiendaLink.addEventListener('click', function(event) {
            if (dropdown.style.display === 'block') {
                dropdown.style.display = 'none';
                event.preventDefault(); // Prevenir la redirección si el menú desplegable está visible
            } else {
                dropdown.style.display = 'block';
                event.preventDefault(); // Prevenir la redirección para mostrar el menú desplegable
            }
        });

        // Cierra el menú desplegable cuando el cursor sale de él
        dropdown.addEventListener('mouseleave', function() {
            setTimeout(function() {
                if (!dropdown.matches(':hover') && !tiendaLink.matches(':hover')) {
                    dropdown.style.display = 'none';
                }
            }, 200);
        });

        // Cierra el menú desplegable cuando el cursor sale del enlace "Tienda"
        tiendaLink.addEventListener('mouseleave', function() {
            setTimeout(function() {
                if (!dropdown.matches(':hover') && !tiendaLink.matches(':hover')) {
                    dropdown.style.display = 'none';
                }
            }, 200);
        });
    });
    </script>
</body>
</html>
